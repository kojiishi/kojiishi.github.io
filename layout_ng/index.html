<!DOCTYPE html>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<style>
html, body {
  margin: 0;
  padding: 0;
}
#by_failure, #by_dir {
  width: 100%;
}
#by_failure {
  height: 50vh;
}
#by_dir {
  height: 100vh;
}
</style>
<script>
google.charts.load('current', {'packages':['corechart']});
const chart_loader = new Promise((resolve, reject) => {
  google.charts.setOnLoadCallback(resolve);
});
const by_failure = loadData('by_failure.json');
const by_dir = loadData('by_dir.json');

async function loadData(url) {
  let rs = await fetch(url);
  let data = await rs.json();
  await chart_loader;
  return google.visualization.arrayToDataTable(data);
}

async function drawChart() {
  await chart_loader;
  let renderer = new google.visualization.AreaChart(document.getElementById('by_failure'));
  renderer.draw(await by_failure, {
    isStacked: true,
  });
  renderer = new google.visualization.AreaChart(document.getElementById('by_dir'));
  renderer.draw(await by_dir, {
    isStacked: true,
  });
}

window.addEventListener('load', drawChart);
window.addEventListener('resize', drawChart);
</script>
<body>
  <div id="by_failure"></div>
  <div id="by_dir"></div>
</body>
